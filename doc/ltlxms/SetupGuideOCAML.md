# SETUP GUIDE

## How to Download and Use All of RMTLD3synth Tools

### Cloning the Repository

Start by pulling the repository from GitHub using:

```sh
git clone --recursive https://github.com/anmaped/rmtld3synth.git
```

### Setting Up Visual Studio Code

1.  Open **Visual Studio Code** and download the extension **"Dev Containers"**.
2.  Navigate to **"Remote Explorer"**, click **"New Dev Container"**, and add the folder created when pulling the repository.
3.  You should now have access to the repository and all files through **Visual Studio Code**.

### Running Configuration Commands

Open a terminal and run the following commands:

```sh
./configure
make
make tests allchecks
```

This configures the tool and runs a series of tests that help understand how it works.

> **Note:** If the latest version was not pulled, it might be necessary to run the following command before executing `make`:

```sh
opam install ppx_yojson_conv
```

### Running the Tool

Your environment is now completely functional. You can start testing the tool using the `rmtld3synth` command or compile manually.

Manual Compilation Guide
------------------------

### Creating a Demonstration Directory

To manually compile, follow these steps:

```sh
mkdir Demonstration
cd Demonstration
cp /workspaces/_build_tests/_alltests/res1.ml res1.ml
touch test.ml
``` 

Now, create a `test.ml` file with the following content:

```
open Res1
module T1 : Trace = struct let trc = [ ("p",(0.));  ("p",(1.));  ("p",(2.)); ] end;;
module M1 = Res1.Res1_0(T1);;
print_string "1) ";;
if M1.mon = Rmtld3_eval.True then print_endline ("\x1b[32m[true]\x1b[0m") 
else (if M1.mon = Rmtld3_eval.False then print_endline ("\x1b[31m[false\x1b[0m")
else print_endline ("\x1b[33m[unknown]\x1b[0m"))
```

Next, copy the required evaluation logic file:

```sh
cp /workspaces/_build_tests/_alltests/rmtld3_eval.ml rmtld3_eval.ml
``` 

Compile and execute:

```sh
ocamlc rmtld3_eval.ml res1.ml test.ml
./a.out
```

### Explanation

To compile, we needed:

-   `res1.ml` (generated by the tool for evaluation),
-   A part of `unittests.ml` responsible for testing `res1.ml`,
-   `rmtld3_eval.ml` (establishing the evaluation logic).

We can compile other tests simply by copying the corresponding `resX.ml` file and the required code from `unittests.ml`.

* * * * *

Generating Monitors with RMTLD3synth
------------------------------------

The files evaluated are all created by **RMTLD3synth**. To generate one, use the following command:

```sh
rmtld3synth --synth-ocaml --input-dsl "a || b" --out-src out
```

This creates a monitor in **OCaml** for the `"a or b"` expression. You can modify this to synthesize monitors for other expressions as needed.




